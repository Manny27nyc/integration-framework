{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://launchdarkly.com/schemas/v1.0/integrations",
    "title": "LaunchDarkly Integrations Manifest",
    "description": "Describes the capabilities and intent of a LaunchDarkly integration",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "name": {
            "$id": "#/properties/name",
            "title": "Integration name",
            "description": "Your integration's name.",
            "minLength": 3,
            "maxLength": 100,
            "type": "string"
        },
        "version": {
            "$id": "#/properties/version",
            "title": "Version",
            "description": "A semantic version of the integration. See https://semver.org for more info.",
            "examples": [
                "0.0.1",
                "1.0.0",
                "1.0.1-beta"
            ],
            "type": "string",
            "minLength": 5,
            "maxLength": 14,
            "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$"
        },
        "overview": {
            "$id": "#/properties/overview",
            "title": "Short description",
            "description": "A short-one liner describing your integration",
            "type": "string",
            "minLength": 10,
            "maxLength": 100,
            "pattern": "^(.*)$"
        },
        "description": {
            "$id": "#/properties/description",
            "title": "Long description",
            "description": "A longer description of your integration",
            "type": "string",
            "minLength": 50,
            "maxLength": 2048,
            "pattern": "^(.*)$"
        },
        "author": {
            "$id": "#/properties/author",
            "title": "Author",
            "description": "Name of the author or organization responsible for the integration",
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "pattern": "^(.*)$"
        },
        "supportEmail": {
            "$id": "#/properties/links/support-email",
            "title": "Support Email",
            "description": "Email address for your integration's support",
            "type": "string",
            "format": "email"
        },
        "links": {
            "$id": "#/properties/links",
            "title": "Links",
            "description": "A set of reference links supporting your integration",
            "type": "object",
            "properties": {
                "site": {
                    "$id": "#/properties/links/site",
                    "title": "Website",
                    "description": "URL to your website",
                    "type": "string",
                    "maxLength": 2048,
                    "pattern": "^[Hh][Tt][Tt][Pp][Ss]?://"
                },
                "privacyPolicy": {
                    "$id": "#/properties/links/privacy-policy",
                    "title": "Privacy Policy",
                    "description": "URL to your organization's privacy policy",
                    "type": "string",
                    "maxLength": 2048,
                    "pattern": "^[Hh][Tt][Tt][Pp][Ss]?://"
                },
                "supportWebsite": {
                    "$id": "#/properties/links/support-website",
                    "title": "Support Website",
                    "description": "URL to your integration's support website",
                    "type": "string",
                    "maxLength": 2048,
                    "pattern": "^[Hh][Tt][Tt][Pp][Ss]?://"
                }
            },
            "required": [
                "site",
                "privacyPolicy"
            ]
        },
        "categories": {
            "$id": "#/properties/categories",
            "title": "Categories",
            "description": "Categories that describe your integration",
            "type": "array",
            "uniqueItems": true,
            "minItems": 1,
            "maxItems": 3,
            "items": {
                "type": "string",
                "enum": [
                    "alerts",
                    "analytics-and-reporting",
                    "apm",
                    "automation",
                    "communication-and-collaboration",
                    "config-and-deployment",
                    "exceptions",
                    "experimentation",
                    "hr-and-operations",
                    "issue-tracking",
                    "it-and-project-management",
                    "marketing-and-social-media",
                    "monitoring",
                    "orchestration",
                    "product-and-design",
                    "provisioning",
                    "security",
                    "source-control"
                ]
            }
        },
        "icons": {
            "$id": "#/properties/icons",
            "title": "Icons",
            "description": "Logos describing your integration in SVG format",
            "type": "object",
            "properties": {
                "square": {
                    "$id": "#/properties/icons/square",
                    "title": "Square logo",
                    "description": "A square version of your integration's logo in SVG format",
                    "type": "string",
                    "pattern": "\\.svg$"
                },
                "rectangular": {
                    "$id": "#/properties/icons/rectangular",
                    "title": "Rectangular logo",
                    "description": "A rectangular version of your integration's logo in SVG format",
                    "type": "string",
                    "pattern": "\\.svg$"
                }
            },
            "required": [
                "square",
                "rectangular"
            ]
        },
        "authentication": {
            "$id": "#/properties/authentication",
            "title": "Authentication",
            "description": "Specify the authentication method required by your integration",
            "type": "object",
            "properties": {
                "type": {
                    "$id": "#/properties/authentication/type",
                    "title": "Auth Type",
                    "description": "Specify the authentication method required by your integration",
                    "type": "string",
                    "enum": [
                        "token"
                    ]
                },
                "label": {
                    "$id": "#/properties/authentication/label",
                    "title": "Token",
                    "description": "Label to use in the LaunchDarkly UI describing you token",
                    "examples": [
                        "API key",
                        "API token"
                    ],
                    "type": "string"
                },
                "hint": {
                    "$id": "#/properties/authentication/hint",
                    "title": "Hint",
                    "description": "A placeholder hint used in the LaunchDarkly UI describing your token",
                    "examples": [
                        "Enter API key from your SpaceXYZ account"
                    ],
                    "type": "string"
                },
                "acceptedAs": {
                    "$id": "#/properties/authentication/acceptedAs",
                    "title": "Token accepted as...",
                    "description": "Specify how your token should be provided in the request to your service",
                    "type": "object",
                    "properties": {
                        "type": {
                            "$id": "#/properties/authentication/acceptedAs/type",
                            "title": "Type",
                            "description": "Specify the method in which your token is provided in the request. In most cases, tokens are either passed through query parameter or a header.",
                            "type": "string",
                            "enum": [
                                "query-param",
                                "header"
                            ]
                        },
                        "name": {
                            "$id": "#/properties/authentication/acceptedAs/type/param-name",
                            "title": "Query parameter or header name",
                            "description": "Specify the name of the query parameter or header you'd like to use",
                            "type": "string",
                            "examples": [
                                "token",
                                "key",
                                "X-App-Token"
                            ]
                        },
                        "prefix": {
                            "$id": "#/properties/authentication/acceptedAs/type/header-value-prefix",
                            "title": "Header value prefix",
                            "description": "If your token needs to be padded with a prefix, specify it here",
                            "type": "string",
                            "examples": [
                                "Bearer "
                            ]
                        }
                    },
                    "required": [
                        "type",
                        "name"
                    ],
                    "propertyNames": {
                        "enum": [
                            "type",
                            "name",
                            "prefix"
                        ]
                    }
                }
            },
            "required": [
                "type",
                "label",
                "hint",
                "acceptedAs"
            ],
            "propertyNames": {
                "enum": [
                    "type",
                    "label",
                    "hint",
                    "acceptedAs"
                ]
            }
        },
        "formVariables": {
            "$id": "#/properties/formVariables",
            "title": "Form variables",
            "description": "Form variables will be rendered on the integration configuration page. These are variables you need an admin to supply when they enable the integration. Examples of a form variable include `apiToken` or `url`.",
            "type": "array",
            "items": {
                "$id": "#/properties/formVariables/variable",
                "title": "Form variable",
                "description": "A form variable describes an object property that the LaunchDarkly admin will be prompted for when they configure an integration.",
                "type": "object",
                "propertyNames": {
                    "enum": [
                        "key",
                        "name",
                        "type",
                        "description",
                        "isSecret"
                    ]
                },
                "properties": {
                    "key": {
                        "$id": "#/properties/formVariables/variable/key",
                        "title": "Key",
                        "type": "string",
                        "description": "A key will be used as the token name when the variable is substituted",
                        "maxLength": 20,
                        "pattern": "^[^\\s]*$"
                    },
                    "name": {
                        "$id": "#/properties/formVariables/variable/name",
                        "title": "Name",
                        "type": "string",
                        "description": "A descriptive name that will be used as the form label on the UI",
                        "maxLength": 50
                    },
                    "type": {
                        "$id": "#/properties/formVariables/variable/type",
                        "title": "Type",
                        "type": "string",
                        "description": "The type of the variable",
                        "enum": [
                            "string",
                            "boolean",
                            "uri"
                        ]
                    },
                    "description": {
                        "$id": "#/properties/formVariables/variable/description",
                        "title": "Description",
                        "type": "string",
                        "description": "Describes the variable in the UI. Markdown links allowed.",
                        "maxLength": 250
                    },
                    "isSecret": {
                        "$id": "#/properties/formVariables/variable/is-secret",
                        "title": "Is this variable a secret",
                        "type": "boolean",
                        "description": "Secret variables will be masked in the UI"
                    }
                },
                "required": [
                    "key",
                    "name",
                    "type",
                    "description"
                ]
            }
        },
        "capabilities": {
            "$id": "#/properties/capabilities",
            "title": "Capabilities",
            "description": "Specify which capabilities you'd like your integration to have",
            "type": "object",
            "properties": {
                "auditLogEventsHook": {
                    "$id": "#/properties/capability/audit-log-events-hook",
                    "title": "Audit Log Events Hook",
                    "description": "This capability will enable LaunchDarkly to send audit log event webhooks to your endpoint.",
                    "type": "object",
                    "propertyNames": {
                        "enum": [
                            "endpoint",
                            "method",
                            "contentType",
                            "templates",
                            "defaultPolicy"
                        ]
                    },
                    "properties": {
                        "endpoint": {
                            "$id": "#/properties/capability/audit-log-events-hook/receiving-endpoint",
                            "title": "Endpoint",
                            "description": "Properties that describe the HTTP endpoint LaunchDarkly will send hooks to",
                            "type": "object",
                            "propertyNames": {
                                "enum": [
                                    "url",
                                    "method",
                                    "headers"
                                ]
                            },
                            "properties": {
                                "method": {
                                    "$id": "#/properties/capability/audit-log-events-hook/method",
                                    "title": "HTTP method",
                                    "description": "HTTP method to use when LaunchDarkly makes the request to your endpoint",
                                    "enum": [
                                        "post",
                                        "put",
                                        "patch"
                                    ],
                                    "default": "post"
                                },
                                "headers": {
                                    "$id": "#/properties/capability/audit-log-events-hook/headers",
                                    "title": "Headers",
                                    "description": "Headers to send with the webhook request",
                                    "type": "object",
                                    "default": {
                                        "Content-Type": "application/json"
                                    },
                                    "examples": [
                                        {
                                            "Content-Type": "application/json",
                                            "Authorization": "Bearer {{apiToken}}"
                                        }
                                    ],
                                    "minProperties": 1
                                }
                            },
                            "required": [
                                "url"
                            ]
                        },
                        "templates": {
                            "$id": "#/properties/capability/audit-log-events-hook/templates",
                            "title": "Webhook body template",
                            "description": "Templates to use for body of the webhook request",
                            "type": "object",
                            "properties": {
                                "flag": {
                                    "$id": "#/properties/capability/audit-log-events-hook/templates/flag",
                                    "title": "Flag template",
                                    "description": "Template to use for flag events",
                                    "type": "string"
                                },
                                "project": {
                                    "$id": "#/properties/capability/audit-log-events-hook/templates/project",
                                    "title": "Project template",
                                    "description": "Template to use for project events",
                                    "type": "string"
                                },
                                "environment": {
                                    "$id": "#/properties/capability/audit-log-events-hook/templates/environment",
                                    "title": "Environment template",
                                    "description": "Template to use for environment events",
                                    "type": "string"
                                },
                                "metric": {
                                    "$id": "#/properties/capability/audit-log-events-hook/templates/metric",
                                    "title": "Metric template",
                                    "description": "Template to use for metric events",
                                    "type": "string"
                                }
                            }
                        },
                        "defaultPolicy": {
                            "$id": "#/properties/capability/audit-log-events-hook/default-policy",
                            "title": "Default Policy",
                            "description": "LaunchDarkly policy that allows you to filter events sent to your webhook. See https://docs.launchdarkly.com/docs/policies-in-custom-roles for more information.",
                            "type": "array",
                            "items": {
                                "$id": "#/properties/capability/audit-log-events-hook/policy",
                                "title": "Policy",
                                "description": "A LaunchDarkly policy. See https://docs.launchdarkly.com/docs/policies-in-custom-roles for more information.",
                                "type": "object",
                                "propertyNames": {
                                    "enum": [
                                        "actions",
                                        "effect",
                                        "notActions",
                                        "notResources",
                                        "resources"
                                    ]
                                },
                                "properties": {
                                    "actions": {
                                        "$id": "#/properties/capability/audit-log-events-hook/policy/actions",
                                        "title": "Actions",
                                        "description": "A list of action specifiers defining the actions to which the statement applies. See https://docs.launchdarkly.com/docs/actions-in-custom-roles for more information.",
                                        "default": [
                                            "*"
                                        ],
                                        "examples": [
                                            "updateOn",
                                            "createFlag",
                                            "updateRules",
                                            "updateTargets"
                                        ],
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "effect": {
                                        "$id": "#/properties/capability/audit-log-events-hook/policy/effect",
                                        "title": "Effect",
                                        "description": "This attribute defines whether the statement allows or denies access to the named resources and actions.",
                                        "default": "allow",
                                        "type": "string",
                                        "enum": [
                                            "allow",
                                            "deny"
                                        ]
                                    },
                                    "notActions": {
                                        "$id": "#/properties/capability/audit-log-events-hook/policy/not-actions",
                                        "title": "Not actions",
                                        "description": "A list of action specifiers defining the actions to which the statement does not apply. See https://docs.launchdarkly.com/docs/actions-in-custom-roles for more information.",
                                        "default": [
                                            "*"
                                        ],
                                        "examples": [
                                            "createFlag",
                                            "deleteFlag",
                                            "cloneFlag"
                                        ],
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "notResources": {
                                        "$id": "#/properties/capability/audit-log-events-hook/policy/not-resources",
                                        "title": "Not resources",
                                        "description": "A list of resource specifiers defining the resources to which the statement does not apply. See https://docs.launchdarkly.com/docs/resources-in-custom-roles for more information.",
                                        "default": [
                                            "*"
                                        ],
                                        "examples": [
                                            "proj/*:env/production:flag/*"
                                        ],
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "resources": {
                                        "$id": "#/properties/capability/audit-log-events-hook/policy/resources",
                                        "title": "Resources",
                                        "description": "A list of resource specifiers defining the resources to which the statement applies. See https://docs.launchdarkly.com/docs/resources-in-custom-roles for more information.",
                                        "default": [
                                            "*"
                                        ],
                                        "examples": [
                                            "proj/*:env/production:flag/*"
                                        ],
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "required": [
                        "endpoint"
                    ]
                }
            },
            "minProperties": 1
        }
    },
    "required": [
        "name",
        "version",
        "overview",
        "description",
        "author",
        "supportEmail",
        "links",
        "categories",
        "icons",
        "capabilities"
    ]
}